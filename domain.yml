version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - product_stock
  - order_shoes
  - bot_challenge
  - order_cancel
  - order_return
  - give_shoes_color
  - give_shoes_size
  - give_email
  - give_time
  - order_status
  - give_city
  - check_weather
  - chitchat
  - nlu_fallback 
  - faq
  - out_of_scope
entities:
  - color
  - size
  - email
  - city
slots:
  color:
    type: text
    influence_conversation: false
    mappings:
    - entity: color
      type: from_entity
      conditions:
      - active_loop: product_stock_form
        # requested_slot: color
  size: 
    type: text
    influence_conversation: false
    mappings:
    - entity: size
      type: from_entity
      conditions:
      - active_loop: product_stock_form
  email: 
    type: text
    influence_conversation: false
    mappings:
    - entity: email
      type: from_entity
      conditions:
      - active_loop: order_return_form
      - active_loop: order_status_form
  city: 
    type: text
    influence_conversation: false
    mappings:
    - entity: city
      type: from_entity

forms:
  product_stock_form:
    required_slots:
    - color
    - size
  order_cancel_form:
    required_slots:
    - email
  order_return_form:
    required_slots:
    - email
  order_status_form:
    ignored_intents: []
    required_slots:
    - email

responses:
  utter_did_that_help:
  - text: "Did that help you?"
  utter_happy:
  - text: "Great, carry on!"
  utter_goodbye:
  - text: "Bye"
  utter_iamabot:
  - text: "I am a bot, powered by Rasa."
  utter_order_shoes:
  - text: "Sorry, I can't actually help you order the shoes. Please visit our site to buy some nice shoes! I can help you check inventory, see the status of an order or even make a change to that order."
  utter_start_over:
  - text: "OK, Let's start over!"
  utter_product_stock_start:
  - text: I can help you find some shoes!
  utter_ask_product_stock_form_size:
  - text: What size shoe would you like?
  utter_ask_product_stock_form_color:
  - text: What color are you looking for?
  utter_no_order:
  - text: Hmm, seems like we don't have an order associated with that email
  utter_in_stock:
  - text: You're in luck! We have those in stock.
  utter_greet:
  - buttons:
    - payload: Check status of my order
      title: Check status of my order
    - payload: Start a return
      title: Start a return
    - payload: Check inventory
      title: Check inventory
    # - payload: Subscribe to product updates
    #   title: Subscribe to product updates
    text: Hi there! I'm a demo bot from Rasa to help you with ordering shoes. How can I help you?
  utter_default:
  - text: I don't think I understand. Can you try providing more detail?
  - text: um, what did you just say to me?
  - text: beep, boop, don't understand

  utter_please_rephrase:
  - text: I'm sorry, I didn't quite understand that. Could you rephrase?

  utter_no_stock:
  - text: Sorry, seems like we don't have those shoes.
  utter_ask_order_return_form_email:
  - text: "Let's start that return. To help find your order, can you please provide your email address?"
  utter_ask_order_status_form_email:
  - text: I can help you find the status of your order. What's your email address so I can find the order?  
  utter_city:
  - text: "which city you want to check for?"
  utter_temp:
  - text: "Today's temperature is {temp} degree Celcius."

  utter_chitchat/thanks:
  - text: No problem!
  - text: I have no choice but to help you.
  - text: I try my best
  utter_chitchat/confirm_presence:
  - text: yep I'm here.
  - text: unfortunately, I'm still listening.
  utter_chitchat/capabilities:
  - text: I can help you start a return, subscribe to our emails, and even see if we carry your desired shoes.
  utter_chitchat/mood_great:
  - text: Superb!
  - text: right on
  utter_chitchat/mood_unhappy:
  - text: sorry to hear that :(
  - text: ok can you be nice to me
  utter_chitchat/bot_challenge:
  - text: I'm a bot, built using Rasa! Beep boop
  utter_chitchat/goodbye:
  - text: bye bye
  - text: c u l8er allig8er

  utter_faq/alternate_info:
  - text: Currenty we can only provide order information based on email.
  utter_faq/sizing_clarification:
  - text: Right now we only offer American sizes. We'll try to change this in the future!
  utter_faq/payment_methods:
  - text: We accept all major credit cards, Apple Pay, Google Pay, and PayPal.
  utter_faq/promotions:
  - text: Currently, we're running a buy one get one half off promotion!

actions:
- action_product_search
- utter_product_stock_start
# - action_product_search
# - action_survey_submit
- action_order_status
- action_cancel_order
- action_return
- action_show_time
- action_tell_weather
- utter_city
- utter_temp
# - action_give_name

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
